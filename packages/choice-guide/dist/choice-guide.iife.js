var OpenstadHeadlessChoiceGuide=function(exports,React,require$$0){"use strict";function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var createRoot,m=require$$0;if(process.env.NODE_ENV==="production")createRoot=m.createRoot,m.hydrateRoot;else{var i=m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;createRoot=function(e,t){i.usingClientEntryPoint=!0;try{return m.createRoot(e,t)}finally{i.usingClientEntryPoint=!1}}}var _jsxFileName$b="/opt/openstad-headless/packages/lib/load-widget.tsx";function loadWidget(e,t){const n=this,s=document.getElementById(e);s&&createRoot(s).render(React.createElement(n,{...t,__self:this,__source:{fileName:_jsxFileName$b,lineNumber:11,columnNumber:17}}))}const index$i="",index$h="";var _jsxFileName$a="/opt/openstad-headless/packages/ui/src/button/index.tsx";const Button=React.forwardRef((e,t)=>React.createElement("button",{ref:t,...e,className:`osc-button ${e.className}`,__self:void 0,__source:{fileName:_jsxFileName$a,lineNumber:14,columnNumber:7}},e.icon&&!e.iconBack?React.createElement("i",{className:e.icon,__self:void 0,__source:{fileName:_jsxFileName$a,lineNumber:15,columnNumber:42}}):null,e.children,e.icon&&e.iconBack?React.createElement("i",{className:e.icon,__self:void 0,__source:{fileName:_jsxFileName$a,lineNumber:17,columnNumber:41}}):null)),SecondaryButton=React.forwardRef((e,t)=>React.createElement(Button,{ref:t,...e,className:`osc-secondary ${e.className}`,__self:void 0,__source:{fileName:_jsxFileName$a,lineNumber:26,columnNumber:7}})),PlainButton=React.forwardRef((e,t)=>React.createElement(Button,{ref:t,...e,className:`plain ${e.className}`,__self:void 0,__source:{fileName:_jsxFileName$a,lineNumber:34,columnNumber:7}}));React.forwardRef((e,t)=>React.createElement(Button,{ref:t,...e,className:`ghost ${e.className}`,__self:void 0,__source:{fileName:_jsxFileName$a,lineNumber:42,columnNumber:7}}));const index$g="",index$f="";var _jsxFileName$9="/opt/openstad-headless/packages/ui/src/icon/index.tsx";function Icon({text:e,icon:t,variant:n="regular"}){return React.createElement("div",{className:`icon ${e===void 0?"no-label":""}`,__self:this,__source:{fileName:_jsxFileName$9,lineNumber:15,columnNumber:5}},React.createElement("i",{className:`${t} ${n}`,__self:this,__source:{fileName:_jsxFileName$9,lineNumber:16,columnNumber:7}}),React.createElement("p",{__self:this,__source:{fileName:_jsxFileName$9,lineNumber:17,columnNumber:7}},e))}var _jsxFileName$8="/opt/openstad-headless/packages/ui/src/iconbutton/index.tsx";React.forwardRef((e,t)=>React.createElement("button",{ref:t,...e,className:`osc-icon-button ${e.className}`,__self:void 0,__source:{fileName:_jsxFileName$8,lineNumber:13,columnNumber:7}},e.icon?React.createElement(Icon,{icon:e.icon,__self:void 0,__source:{fileName:_jsxFileName$8,lineNumber:17,columnNumber:23}}):null,e.children));const index$e="",index$d="";var _jsxFileName$7="/opt/openstad-headless/packages/ui/src/input/index.tsx";const Input=React.forwardRef((e,t)=>React.createElement(React.Fragment,null,e.label?React.createElement("p",{className:"input-label",__self:void 0,__source:{fileName:_jsxFileName$7,lineNumber:14,columnNumber:22}},e.label):null,React.createElement("input",{ref:t,type:"text",...e,className:`${e.errors?"alert":null} ${e.className}`,__self:void 0,__source:{fileName:_jsxFileName$7,lineNumber:15,columnNumber:7}}),e.errors?React.createElement(React.Fragment,null,React.createElement("p",{className:"helptext error",__self:void 0,__source:{fileName:_jsxFileName$7,lineNumber:24,columnNumber:11}},React.createElement("i",{className:"ri-alert-fill",__self:void 0,__source:{fileName:_jsxFileName$7,lineNumber:25,columnNumber:13}}),e.errors)):null,e.info&&!e.errors?React.createElement("p",{className:"helptext",__self:void 0,__source:{fileName:_jsxFileName$7,lineNumber:31,columnNumber:9}},React.createElement("i",{className:"ri-error-warning-fill",__self:void 0,__source:{fileName:_jsxFileName$7,lineNumber:32,columnNumber:11}}),e.info):null)),index$c="",index$b="";var _jsxFileName$6="/opt/openstad-headless/packages/ui/src/progressbar/index.tsx";const ProgressBar=e=>{const{progress:t}=e,n={width:`${t}%`};return React.createElement("div",{className:"progressbar",__self:void 0,__source:{fileName:_jsxFileName$6,lineNumber:15,columnNumber:5}},React.createElement("div",{className:"progressbar-tracker",style:n,__self:void 0,__source:{fileName:_jsxFileName$6,lineNumber:16,columnNumber:7}}))};var _jsxFileName$5="/opt/openstad-headless/packages/ui/src/spacer/index.tsx";function Spacer({size:e=1}){return React.createElement("div",{style:{marginBottom:`${e}rem`},__self:this,__source:{fileName:_jsxFileName$5,lineNumber:4,columnNumber:10}})}const index$a="",index$9="",index$8="";var _jsxFileName$4="/opt/openstad-headless/packages/ui/src/select/index.tsx";React.forwardRef(({onValueChange:e,...t},n)=>{const s=t.options??[];return React.createElement("select",{ref:n,...t,className:`select ${t.className}`,onChange:t.onChange||(r=>e&&e(r.target.value)),__self:void 0,__source:{fileName:_jsxFileName$4,lineNumber:14,columnNumber:7}},t.children,s.map(r=>React.createElement(React.Fragment,{key:`select-item-${r.label}`,__self:void 0,__source:{fileName:_jsxFileName$4,lineNumber:25,columnNumber:11}},React.createElement("option",{className:"select-item",value:r.value,__self:void 0,__source:{fileName:_jsxFileName$4,lineNumber:26,columnNumber:13}},r.label))))});const index$7="",index$6="",index$5="",index$4="",index$3="",index$2="",index$1="";var _jsxFileName$3="/opt/openstad-headless/packages/ui/src/slider/index.tsx";const Slider=React.forwardRef((e,t)=>{const[r,a]=React.useState(50),c=d=>{a(Number(d.currentTarget.value)),e.onValueChange(Number(d.currentTarget.value))};function f(d,o,l){const u=o-d;return(l-d)*2/u-1}return React.createElement("div",{className:"osc-slider",__self:void 0,__source:{fileName:_jsxFileName$3,lineNumber:28,columnNumber:5}},React.createElement("div",{className:"osc-slider-track-container",__self:void 0,__source:{fileName:_jsxFileName$3,lineNumber:29,columnNumber:7}},React.createElement("div",{className:"osc-slider-track",__self:void 0,__source:{fileName:_jsxFileName$3,lineNumber:30,columnNumber:9}}),React.createElement("div",{className:"osc-slider-track-progress-container",__self:void 0,__source:{fileName:_jsxFileName$3,lineNumber:31,columnNumber:9}},React.createElement("div",{className:"osc-slider-track-progress",style:{transform:"scaleX("+f(0,100,r)+")"},__self:void 0,__source:{fileName:_jsxFileName$3,lineNumber:32,columnNumber:11}})),React.createElement("div",{className:"osc-slider-track-dot-start osc-slider-track-dot-center",__self:void 0,__source:{fileName:_jsxFileName$3,lineNumber:34,columnNumber:9}})),React.createElement("input",{type:"range",min:0,max:100,step:1,defaultValue:r,onChange:c,className:"osc-slider-input-range",__self:void 0,__source:{fileName:_jsxFileName$3,lineNumber:36,columnNumber:7}}))}),index="";var _jsxFileName$2="/opt/openstad-headless/packages/ui/src/textarea/index.tsx";const Textarea=React.forwardRef((e,t)=>React.createElement(React.Fragment,null,e.label?React.createElement("p",{className:"input-label",__self:void 0,__source:{fileName:_jsxFileName$2,lineNumber:14,columnNumber:22}},e.label):null,React.createElement("textarea",{className:`${e.errors?"alert":null} ${e.className}`,__self:void 0,__source:{fileName:_jsxFileName$2,lineNumber:15,columnNumber:7}}),e.errors?React.createElement(React.Fragment,null,React.createElement("p",{className:"helptext error",__self:void 0,__source:{fileName:_jsxFileName$2,lineNumber:21,columnNumber:11}},React.createElement("i",{className:"ri-alert-fill",__self:void 0,__source:{fileName:_jsxFileName$2,lineNumber:22,columnNumber:13}}),e.errors)):null,e.info&&!e.errors?React.createElement("p",{className:"helptext",__self:void 0,__source:{fileName:_jsxFileName$2,lineNumber:28,columnNumber:9}},React.createElement("i",{className:"ri-error-warning-fill",__self:void 0,__source:{fileName:_jsxFileName$2,lineNumber:29,columnNumber:11}}),e.info):null)),choiceGuide$1="";var _jsxFileName$1="/opt/openstad-headless/packages/choice-guide/src/parts/slider-form.tsx";function SliderForm({onChoiceChanged:e,choice:t,titlePreference:n,titleNoPreference:s}){const[r,a]=React.useState(50);return React.useEffect(()=>{e&&e(r)},[r]),React.createElement("div",{className:"choice-guide-resource-container",__self:this,__source:{fileName:_jsxFileName$1,lineNumber:15,columnNumber:5}},React.createElement("h5",{__self:this,__source:{fileName:_jsxFileName$1,lineNumber:16,columnNumber:7}},t.vraag),React.createElement(Spacer,{size:2,__self:this,__source:{fileName:_jsxFileName$1,lineNumber:17,columnNumber:7}}),React.createElement("h6",{__self:this,__source:{fileName:_jsxFileName$1,lineNumber:18,columnNumber:7}},"A. ",t.optie1),React.createElement("p",{className:"choice-guide-text",__self:this,__source:{fileName:_jsxFileName$1,lineNumber:19,columnNumber:7}},t.optie1Beschrijving),React.createElement("h6",{__self:this,__source:{fileName:_jsxFileName$1,lineNumber:20,columnNumber:7}},"B. ",t.optie2),React.createElement("p",{className:"choice-guide-text",__self:this,__source:{fileName:_jsxFileName$1,lineNumber:21,columnNumber:7}},t.optie2Beschrijving),r<50?React.createElement("p",{__self:this,__source:{fileName:_jsxFileName$1,lineNumber:22,columnNumber:21}},n," ",t.optie1):null,r===50?React.createElement("p",{__self:this,__source:{fileName:_jsxFileName$1,lineNumber:23,columnNumber:23}},s):null,r>50?React.createElement("p",{__self:this,__source:{fileName:_jsxFileName$1,lineNumber:24,columnNumber:21}},n," ",t.optie2):null,React.createElement(Slider,{onValueChange:a,__self:this,__source:{fileName:_jsxFileName$1,lineNumber:25,columnNumber:7}}))}var src={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isPlainObject=t.clone=t.recursive=t.merge=t.main=void 0,e.exports=t=n,t.default=n;function n(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return s.apply(void 0,o)}t.main=n,n.clone=a,n.isPlainObject=c,n.recursive=r;function s(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return d(o[0]===!0,!1,o)}t.merge=s;function r(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return d(o[0]===!0,!0,o)}t.recursive=r;function a(o){if(Array.isArray(o)){for(var l=[],u=0;u<o.length;++u)l.push(a(o[u]));return l}else if(c(o)){var l={};for(var u in o)l[u]=a(o[u]);return l}else return o}t.clone=a;function c(o){return o&&typeof o=="object"&&!Array.isArray(o)}t.isPlainObject=c;function f(o,l){if(!c(o))return l;for(var u in l)u==="__proto__"||u==="constructor"||u==="prototype"||(o[u]=c(o[u])&&c(l[u])?f(o[u],l[u]):l[u]);return o}function d(o,l,u){var _;(o||!c(_=u.shift()))&&(_={});for(var p=0;p<u.length;++p){var b=u[p];if(c(b)){for(var g in b)if(!(g==="__proto__"||g==="constructor"||g==="prototype")){var x=o?a(b[g]):b[g];_[g]=l?f(_[g],x):x}}}return _}})(src,src.exports);var srcExports=src.exports;const merge=getDefaultExportFromCjs(srcExports);function mergeData(e,t,n){let s;switch(n){case"create":if(Array.isArray(e))if(t.parentId){let r=e.findIndex(a=>a.id==t.parentId);r!=-1&&(s=[...e],s[r].replies=s[r].replies||[],s[r].replies.push(t))}else s=[...e],s.push(t);else s=merge.recursive({},e,t);break;case"update":if(Array.isArray(e))if(t.parentId){let r=e.findIndex(a=>a.id==t.parentId);if(r!=-1){let a=e[r].replies.findIndex(c=>c.id==t.id);a!=-1&&(s=[...e],s[r].replies[a]=merge.recursive({},s[r].replies[a],t))}}else{let r=e.findIndex(a=>a.id==t.id);r!=-1&&(s=[...e],s[r]=merge.recursive({},s[r],t))}else s=merge.recursive({},e,t);break;case"delete":if(Array.isArray(e))if(t.parentId){let r=e.findIndex(a=>a.id==t.parentId);if(r!=-1){let a=e[r].replies.findIndex(c=>c.id==t.id);a!=-1&&(s=[...e],s[r].replies.splice(a,1))}}else{let r=e.findIndex(a=>a.id==t.id);r!=-1&&(s=[...e],s.splice(r,1))}else s=void 0;break;case"submitLike":if(Array.isArray(e)){let r=e.findIndex(a=>a.id==t.id);r!=-1&&(s=[...e],s.splice(r,1))}else{let r={[t.opinion]:e[t.opinion]+1},a=e.userVote;a&&(r[a.opinion]=e[a.opinion]-1),s=merge.recursive({},e,r)}break;default:return e}return s||e}var shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreShim_production_min;function requireUseSyncExternalStoreShim_production_min(){if(hasRequiredUseSyncExternalStoreShim_production_min)return useSyncExternalStoreShim_production_min;hasRequiredUseSyncExternalStoreShim_production_min=1;var e=React;function t(u,_){return u===_&&(u!==0||1/u===1/_)||u!==u&&_!==_}var n=typeof Object.is=="function"?Object.is:t,s=e.useState,r=e.useEffect,a=e.useLayoutEffect,c=e.useDebugValue;function f(u,_){var p=_(),b=s({inst:{value:p,getSnapshot:_}}),g=b[0].inst,x=b[1];return a(function(){g.value=p,g.getSnapshot=_,d(g)&&x({inst:g})},[u,p,_]),r(function(){return d(g)&&x({inst:g}),u(function(){d(g)&&x({inst:g})})},[u]),c(p),p}function d(u){var _=u.getSnapshot;u=u.value;try{var p=_();return!n(u,p)}catch{return!0}}function o(u,_){return _()}var l=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?o:f;return useSyncExternalStoreShim_production_min.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:l,useSyncExternalStoreShim_production_min}var useSyncExternalStoreShim_development={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreShim_development;function requireUseSyncExternalStoreShim_development(){return hasRequiredUseSyncExternalStoreShim_development||(hasRequiredUseSyncExternalStoreShim_development=1,process.env.NODE_ENV!=="production"&&function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=React,t=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function n(v){{for(var E=arguments.length,R=new Array(E>1?E-1:0),N=1;N<E;N++)R[N-1]=arguments[N];s("error",v,R)}}function s(v,E,R){{var N=t.ReactDebugCurrentFrame,y=N.getStackAddendum();y!==""&&(E+="%s",R=R.concat([y]));var w=R.map(function(F){return String(F)});w.unshift("Warning: "+E),Function.prototype.apply.call(console[v],console,w)}}function r(v,E){return v===E&&(v!==0||1/v===1/E)||v!==v&&E!==E}var a=typeof Object.is=="function"?Object.is:r,c=e.useState,f=e.useEffect,d=e.useLayoutEffect,o=e.useDebugValue,l=!1,u=!1;function _(v,E,R){l||e.startTransition!==void 0&&(l=!0,n("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var N=E();if(!u){var y=E();a(N,y)||(n("The result of getSnapshot should be cached to avoid an infinite loop"),u=!0)}var w=c({inst:{value:N,getSnapshot:E}}),F=w[0].inst,U=w[1];return d(function(){F.value=N,F.getSnapshot=E,p(F)&&U({inst:F})},[v,N,E]),f(function(){p(F)&&U({inst:F});var W=function(){p(F)&&U({inst:F})};return v(W)},[v]),o(N),N}function p(v){var E=v.getSnapshot,R=v.value;try{var N=E();return!a(R,N)}catch{return!0}}function b(v,E,R){return E()}var g=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",x=!g,h=x?b:_,A=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h;useSyncExternalStoreShim_development.useSyncExternalStore=A,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}()),useSyncExternalStoreShim_development}process.env.NODE_ENV==="production"?shim.exports=requireUseSyncExternalStoreShim_production_min():shim.exports=requireUseSyncExternalStoreShim_development();var shimExports=shim.exports;const noop=()=>{},UNDEFINED=noop(),OBJECT=Object,isUndefined=e=>e===UNDEFINED,isFunction=e=>typeof e=="function",mergeObjects=(e,t)=>({...e,...t}),isPromiseLike=e=>isFunction(e.then),table=new WeakMap;let counter=0;const stableHash=e=>{const t=typeof e,n=e&&e.constructor,s=n==Date;let r,a;if(OBJECT(e)===e&&!s&&n!=RegExp){if(r=table.get(e),r)return r;if(r=++counter+"~",table.set(e,r),n==Array){for(r="@",a=0;a<e.length;a++)r+=stableHash(e[a])+",";table.set(e,r)}if(n==OBJECT){r="#";const c=OBJECT.keys(e).sort();for(;!isUndefined(a=c.pop());)isUndefined(e[a])||(r+=a+":"+stableHash(e[a])+",");table.set(e,r)}}else r=s?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return r},SWRGlobalState=new WeakMap,EMPTY_CACHE={},INITIAL_CACHE={},STR_UNDEFINED="undefined",isWindowDefined=typeof window!=STR_UNDEFINED,isDocumentDefined=typeof document!=STR_UNDEFINED,hasRequestAnimationFrame=()=>isWindowDefined&&typeof window.requestAnimationFrame!=STR_UNDEFINED,createCacheHelper=(e,t)=>{const n=SWRGlobalState.get(e);return[()=>!isUndefined(t)&&e.get(t)||EMPTY_CACHE,s=>{if(!isUndefined(t)){const r=e.get(t);t in INITIAL_CACHE||(INITIAL_CACHE[t]=r),n[5](t,mergeObjects(r,s),r||EMPTY_CACHE)}},n[6],()=>!isUndefined(t)&&t in INITIAL_CACHE?INITIAL_CACHE[t]:!isUndefined(t)&&e.get(t)||EMPTY_CACHE]};let online=!0;const isOnline=()=>online,[onWindowEvent,offWindowEvent]=isWindowDefined&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[noop,noop],isVisible=()=>{const e=isDocumentDefined&&document.visibilityState;return isUndefined(e)||e!=="hidden"},initFocus=e=>(isDocumentDefined&&document.addEventListener("visibilitychange",e),onWindowEvent("focus",e),()=>{isDocumentDefined&&document.removeEventListener("visibilitychange",e),offWindowEvent("focus",e)}),initReconnect=e=>{const t=()=>{online=!0,e()},n=()=>{online=!1};return onWindowEvent("online",t),onWindowEvent("offline",n),()=>{offWindowEvent("online",t),offWindowEvent("offline",n)}},preset={isOnline,isVisible},defaultConfigOptions={initFocus,initReconnect},IS_REACT_LEGACY=!React.useId,IS_SERVER=!isWindowDefined||"Deno"in window,rAF=e=>hasRequestAnimationFrame()?window.requestAnimationFrame(e):setTimeout(e,1),useIsomorphicLayoutEffect=IS_SERVER?React.useEffect:React.useLayoutEffect,navigatorConnection=typeof navigator<"u"&&navigator.connection,slowConnection=!IS_SERVER&&navigatorConnection&&(["slow-2g","2g"].includes(navigatorConnection.effectiveType)||navigatorConnection.saveData),serialize=e=>{if(isFunction(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?stableHash(e):"",[e,t]};let __timestamp=0;const getTimestamp=()=>++__timestamp,FOCUS_EVENT=0,RECONNECT_EVENT=1,MUTATE_EVENT=2,ERROR_REVALIDATE_EVENT=3;var events={__proto__:null,ERROR_REVALIDATE_EVENT,FOCUS_EVENT,MUTATE_EVENT,RECONNECT_EVENT};async function internalMutate(...e){const[t,n,s,r]=e,a=mergeObjects({populateCache:!0,throwOnError:!0},typeof r=="boolean"?{revalidate:r}:r||{});let c=a.populateCache;const f=a.rollbackOnError;let d=a.optimisticData;const o=a.revalidate!==!1,l=p=>typeof f=="function"?f(p):f!==!1,u=a.throwOnError;if(isFunction(n)){const p=n,b=[],g=t.keys();for(const x of g)!/^\$(inf|sub)\$/.test(x)&&p(t.get(x)._k)&&b.push(x);return Promise.all(b.map(_))}return _(n);async function _(p){const[b]=serialize(p);if(!b)return;const[g,x]=createCacheHelper(t,b),[h,A,v,E]=SWRGlobalState.get(t),R=()=>{const $=h[b];return o&&(delete v[b],delete E[b],$&&$[0])?$[0](MUTATE_EVENT).then(()=>g().data):g().data};if(e.length<3)return R();let N=s,y;const w=getTimestamp();A[b]=[w,0];const F=!isUndefined(d),U=g(),W=U.data,J=U._c,P=isUndefined(J)?W:J;if(F&&(d=isFunction(d)?d(P,W):d,x({data:d,_c:P})),isFunction(N))try{N=N(P)}catch($){y=$}if(N&&isPromiseLike(N))if(N=await N.catch($=>{y=$}),w!==A[b][0]){if(y)throw y;return N}else y&&F&&l(y)&&(c=!0,x({data:P,_c:UNDEFINED}));if(c&&!y)if(isFunction(c)){const $=c(N,P);x({data:$,error:UNDEFINED,_c:UNDEFINED})}else x({data:N,error:UNDEFINED,_c:UNDEFINED});if(A[b][1]=getTimestamp(),Promise.resolve(R()).then(()=>{x({_c:UNDEFINED})}),y){if(u)throw y;return}return N}}const revalidateAllKeys=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},initCache=(e,t)=>{if(!SWRGlobalState.has(e)){const n=mergeObjects(defaultConfigOptions,t),s={},r=internalMutate.bind(UNDEFINED,e);let a=noop;const c={},f=(l,u)=>{const _=c[l]||[];return c[l]=_,_.push(u),()=>_.splice(_.indexOf(u),1)},d=(l,u,_)=>{e.set(l,u);const p=c[l];if(p)for(const b of p)b(u,_)},o=()=>{if(!SWRGlobalState.has(e)&&(SWRGlobalState.set(e,[s,{},{},{},r,d,f]),!IS_SERVER)){const l=n.initFocus(setTimeout.bind(UNDEFINED,revalidateAllKeys.bind(UNDEFINED,s,FOCUS_EVENT))),u=n.initReconnect(setTimeout.bind(UNDEFINED,revalidateAllKeys.bind(UNDEFINED,s,RECONNECT_EVENT)));a=()=>{l&&l(),u&&u(),SWRGlobalState.delete(e)}}};return o(),[e,r,o,a]}return[e,SWRGlobalState.get(e)[4]]},onErrorRetry=(e,t,n,s,r)=>{const a=n.errorRetryCount,c=r.retryCount,f=~~((Math.random()+.5)*(1<<(c<8?c:8)))*n.errorRetryInterval;!isUndefined(a)&&c>a||setTimeout(s,f,r)},compare=(e,t)=>stableHash(e)==stableHash(t),[cache,mutate]=initCache(new Map),defaultConfig=mergeObjects({onLoadingSlow:noop,onSuccess:noop,onError:noop,onErrorRetry,onDiscarded:noop,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:slowConnection?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:slowConnection?5e3:3e3,compare,isPaused:()=>!1,cache,mutate,fallback:{}},preset),mergeConfigs=(e,t)=>{const n=mergeObjects(e,t);if(t){const{use:s,fallback:r}=e,{use:a,fallback:c}=t;s&&a&&(n.use=s.concat(a)),r&&c&&(n.fallback=mergeObjects(r,c))}return n},SWRConfigContext=React.createContext({}),INFINITE_PREFIX="$inf$",enableDevtools=isWindowDefined&&window.__SWR_DEVTOOLS_USE__,use$1=enableDevtools?window.__SWR_DEVTOOLS_USE__:[],setupDevTools=()=>{enableDevtools&&(window.__SWR_DEVTOOLS_REACT__=React)},normalize=e=>isFunction(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],useSWRConfig=()=>mergeObjects(defaultConfig,React.useContext(SWRConfigContext)),middleware=e=>(t,n,s)=>e(t,n&&((...a)=>{const[c]=serialize(t),[,,,f]=SWRGlobalState.get(cache);if(c.startsWith(INFINITE_PREFIX))return n(...a);const d=f[c];return isUndefined(d)?n(...a):(delete f[c],d)}),s),BUILT_IN_MIDDLEWARE=use$1.concat(middleware),withArgs=e=>function(...n){const s=useSWRConfig(),[r,a,c]=normalize(n),f=mergeConfigs(s,c);let d=e;const{use:o}=f,l=(o||[]).concat(BUILT_IN_MIDDLEWARE);for(let u=l.length;u--;)d=l[u](d);return d(r,a||f.fetcher||null,f)},subscribeCallback=(e,t,n)=>{const s=t[e]||(t[e]=[]);return s.push(n),()=>{const r=s.indexOf(n);r>=0&&(s[r]=s[s.length-1],s.pop())}};setupDevTools();const use=React.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),WITH_DEDUPE={dedupe:!0},useSWRHandler=(e,t,n)=>{const{cache:s,compare:r,suspense:a,fallbackData:c,revalidateOnMount:f,revalidateIfStale:d,refreshInterval:o,refreshWhenHidden:l,refreshWhenOffline:u,keepPreviousData:_}=n,[p,b,g,x]=SWRGlobalState.get(s),[h,A]=serialize(e),v=React.useRef(!1),E=React.useRef(!1),R=React.useRef(h),N=React.useRef(t),y=React.useRef(n),w=()=>y.current,F=()=>w().isVisible()&&w().isOnline(),[U,W,J,P]=createCacheHelper(s,h),$=React.useRef({}).current,ce=isUndefined(c)?n.fallback[h]:c,Q=(S,j)=>{for(const O in $){const I=O;if(I==="data"){if(!r(S[I],j[I])&&(!isUndefined(S[I])||!r(K,j[I])))return!1}else if(j[I]!==S[I])return!1}return!0},Z=React.useMemo(()=>{const S=(()=>!h||!t?!1:isUndefined(f)?w().isPaused()||a?!1:isUndefined(d)?!0:d:f)(),j=T=>{const L=mergeObjects(T);return delete L._k,S?{isValidating:!0,isLoading:!0,...L}:L},O=U(),I=P(),D=j(O),M=O===I?D:j(I);let C=D;return[()=>{const T=j(U());return Q(T,C)?(C.data=T.data,C.isLoading=T.isLoading,C.isValidating=T.isValidating,C.error=T.error,C):(C=T,T)},()=>M]},[s,h]),B=shimExports.useSyncExternalStore(React.useCallback(S=>J(h,(j,O)=>{Q(O,j)||S()}),[s,h]),Z[0],Z[1]),ee=!v.current,le=p[h]&&p[h].length>0,G=B.data,H=isUndefined(G)?ce:G,q=B.error,te=React.useRef(H),K=_?isUndefined(G)?te.current:G:H,ne=(()=>le&&!isUndefined(q)?!1:ee&&!isUndefined(f)?f:w().isPaused()?!1:a?isUndefined(H)?!1:d:isUndefined(H)||d)(),re=!!(h&&t&&ee&&ne),ue=isUndefined(B.isValidating)?re:B.isValidating,me=isUndefined(B.isLoading)?re:B.isLoading,z=React.useCallback(async S=>{const j=N.current;if(!h||!j||E.current||w().isPaused())return!1;let O,I,D=!0;const M=S||{},C=!g[h]||!M.dedupe,T=()=>IS_REACT_LEGACY?!E.current&&h===R.current&&v.current:h===R.current,L={isValidating:!1,isLoading:!1},ie=()=>{W(L)},ae=()=>{const k=g[h];k&&k[1]===I&&delete g[h]},oe={isValidating:!0};isUndefined(U().data)&&(oe.isLoading=!0);try{if(C&&(W(oe),n.loadingTimeout&&isUndefined(U().data)&&setTimeout(()=>{D&&T()&&w().onLoadingSlow(h,n)},n.loadingTimeout),g[h]=[j(A),getTimestamp()]),[O,I]=g[h],O=await O,C&&setTimeout(ae,n.dedupingInterval),!g[h]||g[h][1]!==I)return C&&T()&&w().onDiscarded(h),!1;L.error=UNDEFINED;const k=b[h];if(!isUndefined(k)&&(I<=k[0]||I<=k[1]||k[1]===0))return ie(),C&&T()&&w().onDiscarded(h),!1;const V=U().data;L.data=r(V,O)?V:O,C&&T()&&w().onSuccess(O,h,n)}catch(k){ae();const V=w(),{shouldRetryOnError:Y}=V;V.isPaused()||(L.error=k,C&&T()&&(V.onError(k,h,V),(Y===!0||isFunction(Y)&&Y(k))&&F()&&V.onErrorRetry(k,h,V,de=>{const X=p[h];X&&X[0]&&X[0](events.ERROR_REVALIDATE_EVENT,de)},{retryCount:(M.retryCount||0)+1,dedupe:!0})))}return D=!1,ie(),!0},[h,s]),se=React.useCallback((...S)=>internalMutate(s,R.current,...S),[]);if(useIsomorphicLayoutEffect(()=>{N.current=t,y.current=n,isUndefined(G)||(te.current=G)}),useIsomorphicLayoutEffect(()=>{if(!h)return;const S=z.bind(UNDEFINED,WITH_DEDUPE);let j=0;const I=subscribeCallback(h,p,(D,M={})=>{if(D==events.FOCUS_EVENT){const C=Date.now();w().revalidateOnFocus&&C>j&&F()&&(j=C+w().focusThrottleInterval,S())}else if(D==events.RECONNECT_EVENT)w().revalidateOnReconnect&&F()&&S();else{if(D==events.MUTATE_EVENT)return z();if(D==events.ERROR_REVALIDATE_EVENT)return z(M)}});return E.current=!1,R.current=h,v.current=!0,W({_k:A}),ne&&(isUndefined(H)||IS_SERVER?S():rAF(S)),()=>{E.current=!0,I()}},[h]),useIsomorphicLayoutEffect(()=>{let S;function j(){const I=isFunction(o)?o(U().data):o;I&&S!==-1&&(S=setTimeout(O,I))}function O(){!U().error&&(l||w().isVisible())&&(u||w().isOnline())?z(WITH_DEDUPE).then(j):j()}return j(),()=>{S&&(clearTimeout(S),S=-1)}},[o,l,u,h]),React.useDebugValue(K),a&&isUndefined(H)&&h){if(!IS_REACT_LEGACY&&IS_SERVER)throw new Error("Fallback data is required when using suspense in SSR.");N.current=t,y.current=n,E.current=!1;const S=x[h];if(!isUndefined(S)){const j=se(S);use(j)}if(isUndefined(q)){const j=z(WITH_DEDUPE);isUndefined(K)||(j.status="fulfilled",j.value=!0),use(j)}else throw q}return{mutate:se,get data(){return $.data=!0,K},get error(){return $.error=!0,q},get isValidating(){return $.isValidating=!0,ue},get isLoading(){return $.isLoading=!0,me}}},useSWR=withArgs(useSWRHandler);async function doFetch(e="",t={}){let n=this;t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",n.currentUserJWT&&(t.headers.Authorization="Bearer "+n.currentUserJWT);let s;if(s=await fetch(this.apiUrl+e,t),!s.ok){let a=await s.json(),c=new Error(a.error||a.message||s.statusText),f=new window.CustomEvent("osc-error",{detail:c});throw document.dispatchEvent(f),c}return await s.json()||{}}const resource={fetch:async function({projectId:e,resourceId:t},n){let s=`/api/project/${e}/resource/${t}?includeUser=1&includeVoteCount=1&includeUserVote=1`,r={"Content-Type":"application/json"};return this.fetch(s,{headers:r})},update:async function({projectId:e,resourceId:t},n){let s=`/api/project/${e}/resource/${t}`,r={"Content-Type":"application/json"},a=await this.fetch(s,{headers:r,method:"put",body:JSON.stringify(n)}),c=new window.CustomEvent("osc-api-update-data",{detail:{type:"resource",resource:a,data:n}});return window.dispatchEvent(c),a},delete:async function({projectId:e,resourceId:t},n){let s=`/api/project/${e}/resource/${t}`,r="delete";return await this.fetch(s,{method:r}),{id:n.id}},submitLike:async function({projectId:e,resourceId:t},n){let s=`/api/project/${e}/vote`,r={"Content-Type":"application/json"},a=await this.fetch(s,{headers:r,method:"POST",body:JSON.stringify({resourceId:t,opinion:n.opinion})}),c=new window.CustomEvent("osc-resource-submit-like",{detail:{type:"resource",resourceId:t,data:n}});return window.dispatchEvent(c),a}},comments={fetch:async function({projectId:e,resourceId:t,sentiment:n}){let s=`/api/project/${e}/resource/${t}/comment?sentiment=${n}&includeUser=1&includeUserVote=1&includeVoteCount=1&includeRepliesOnComments=1`;return this.fetch(s)},create:async function({projectId:e,resourceId:t},n){let s=`/api/project/${e}/resource/${t}/comment`,r="post";delete n.id;let a=JSON.stringify(n);return await this.fetch(s,{method:r,body:a})},update:async function({projectId:e,resourceId:t},n){let s=`/api/project/${e}/resource/${t}/comment/${n.id}`,r="put",a=JSON.stringify(n);return await this.fetch(s,{method:r,body:a})},delete:async function({projectId:e,resourceId:t},n){let s=`/api/project/${e}/resource/${t}/comment/${n.id}`,r="delete";return await this.fetch(s,{method:r}),{id:n.id}},submitLike:async function({projectId:e,resourceId:t},n){let s=`/api/project/${e}/resource/${t}/comment/${n.id}/vote`,r="post";return JSON.stringify({}),await this.fetch(s,{method:r})}},resources={fetch:async function({projectId:e,page:t,pageSize:n,search:s,tags:r,sort:a},c,f){const d=new URLSearchParams;Array.isArray(r)&&r.length>0&&r.forEach(l=>d.append("tags",l)),s&&d.append("search[text]",s),a&&(Array.isArray(a)||(a=[a]),a.map(l=>d.append("sort",l))),t>=0&&n?(d.append("page",t),d.append("pageSize",n)):n>=0&&(d.append("page",0),d.append("pageSize",n));let o=`/api/project/${e}/resource?includeUser=1&includeUserVote=1&includeVoteCount=1&includeTags=1&${d.toString()}`;return this.fetch(o)},delete:async function({projectId:e,resourceId:t},n){let s=`/api/project/${e}/resource/${n.id}`,r="delete";return await this.fetch(s,{method:r}),{id:n.id}}},tags={fetch:async function({projectId:e,type:t,onlyIncludeIds:n=[]}){const s=new URLSearchParams;n.length>0&&n.forEach(a=>s.append("tags",a));let r=`/api/project/${e}/tag?type=${t}&${s.toString()}`;return this.fetch(r)},create:async function({projectId:e,type:t},n){let s=`/api/project/${e}/tag`,r="post";delete n.id;let a=JSON.stringify(n);return await this.fetch(s,{method:r,body:a})},update:async function({projectId:e,type:t},n){let s=`/api/project/${e}/tag/${n.id}`,r="put",a=JSON.stringify(n);return await this.fetch(s,{method:r,body:a})},delete:async function({projectId:e,type:t},n){let s=`/api/project/${e}/tag/${n.id}`,r="delete";return await this.fetch(s,{method:r}),{id:n.id}}},user={fetch:async function({projectId:e,userId:t}){let n=`/api/project/${e}/user/${t}`,s={"Content-Type":"application/json"};return this.fetch(n,{headers:s})},fetchMe:async function({projectId:e}){let t=`/auth/project/${e}/me`,n={"Content-Type":"application/json"},r=await this.fetch(t,{headers:n});return r&&r.id&&(r={...r,jwt:self.currentUserJWT}),r},connectUser:async function({projectId:e,cmsUser:t}){let n=`/auth/project/${e}/connect-user?useAuth=oidc`,s={"Content-Type":"application/json"},r={access_token:t.access_token,iss:`${t.iss}`};return(await this.fetch(n,{headers:s,method:"POST",body:JSON.stringify(r)})).jwt}},userVote={fetch:async function({projectId:e,type:t}){return{}},submitVote:async function({projectId:e,type:t},n){console.log("SUBMIT VOTE");let s=`/api/project/${e}/vote`,r={"Content-Type":"application/json"},a=n.map(d=>({resourceId:d.id,opinion:"selected"})),c=await this.fetch(s,{headers:r,method:"POST",body:JSON.stringify(a)}),f=new window.CustomEvent("osc-submit-user-vote",{detail:{type:"userVote",votes:a}});return window.dispatchEvent(f),c}},submissions={fetch:async function({projectId:e}){let t=`/api/project/${e}/submission`;return this.fetch(t)}},commentsByProject={fetch:async function({projectId:e,sentiment:t}){let n=`/api/project/${e}/comment?sentiment=${t}`;return this.fetch(n)}},choiceGuideResults={fetch:async function({projectId:e,choiceGuideId:t}){let n=`/api/project/${e}/choicesguide/${t}/result`;return this.fetch(n)}},choiceGuide={fetch:async function({projectId:e,choiceGuideId:t}){let n=`/api/project/${e}/choicesguide/${t}`;return this.fetch(n)}},windowGlobal$1=typeof window<"u"?window:{};windowGlobal$1.OpenStadAPI=null;function singelton(e={config:{}}){return windowGlobal$1.OpenStadAPI=windowGlobal$1.OpenStadAPI||new API(e)}function API(e={}){var n;let t=this;t.apiUrl=e.apiUrl||((n=e.api)==null?void 0:n.url)||null,t.projectId=e.projectId||0,t.fetch=doFetch.bind(t),t.choiceGuideResults={fetch:choiceGuideResults.fetch.bind(t)},t.choiceGuide={fetch:choiceGuide.fetch.bind(t)},t.comments={fetch:comments.fetch.bind(t),create:comments.create.bind(t),update:comments.update.bind(t),delete:comments.delete.bind(t),submitLike:comments.submitLike.bind(t)},t.commentsByProject={fetch:commentsByProject.fetch.bind(t)},t.resource={fetch:resource.fetch.bind(t),update:resource.update.bind(t),delete:resource.delete.bind(t),submitLike:resource.submitLike.bind(t)},t.resources={fetch:resources.fetch.bind(t),delete:resources.delete.bind(t)},t.submissions={fetch:submissions.fetch.bind(t)},t.tags={fetch:tags.fetch.bind(t),create:tags.create.bind(t),update:tags.update.bind(t),delete:tags.delete.bind(t)},t.user={fetch:user.fetch.bind(t),fetchMe:user.fetchMe.bind(t),connectUser:user.connectUser.bind(t)},t.userVote={fetch:userVote.fetch.bind(t),submitVote:userVote.submitVote.bind(t)}}function useResource(e){let t=this;const n=e.projectId,s=e.resourceId,{data:r,error:a,isLoading:c}=t.useSWR({projectId:n,resourceId:s},"resource.fetch");let f=r||{};return f.update=function(d){t.mutate({projectId:n,resourceId:s},"resource.update",d,{action:"update"})},f.delete=function(){t.mutate({projectId:n,resourceId:s},"resource.delete",f,{action:"delete"})},f.submitLike=function(d){t.mutate({projectId:n,resourceId:s},"resource.submitLike",d,{action:"submitLike",revalidate:!0,populateCache:!1})},[f,a,c]}function useComments(e){let t=this;const n=e.projectId,s=e.resourceId,r=e.sentiment||null,{data:a,error:c,isLoading:f}=t.useSWR({projectId:n,resourceId:s,sentiment:r},"comments.fetch");let d=a||[];return d.create=function(o){return t.mutate({projectId:n,resourceId:s,sentiment:r},"comments.create",o,{action:"create"})},d.map(async o=>{var l;o.update=function(u){return t.mutate({projectId:n,resourceId:s,sentiment:r},"comments.update",u,{action:"update"})},o.delete=function(u){return t.mutate({projectId:n,resourceId:s,sentiment:r},"comments.delete",o,{action:"delete"})},o.submitLike=function(){return t.mutate({projectId:n,resourceId:s,sentiment:r},"comments.submitLike",o,{action:"update"})},(l=o.replies)==null||l.map(async u=>{u.update=function(_){return t.mutate({projectId:n,resourceId:s,sentiment:r},"comments.update",_,{action:"update"})},u.delete=function(_){return t.mutate({projectId:n,resourceId:s,sentiment:r},"comments.delete",u,{action:"delete"})},u.submitLike=function(){return t.mutate({projectId:n,resourceId:s,sentiment:r},"comments.submitLike",u,{action:"update"})}})}),[d,c,f]}function useResources({projectId:e,page:t=0,pageSize:n=20,search:s="",tags:r=[],sort:a="createdAt_desc"}){let c=this;const{data:f,error:d,isLoading:o}=c.useSWR({projectId:e,page:t,pageSize:n,search:s,tags:r,sort:a},"resources.fetch");let l=f||[];return Array.isArray(l)&&(l={metadata:{page:0,pageSize:l.length,pageCount:1,totalCount:l.length},records:l}),l.records.create=function(u){return c.mutate({projectId:e},"resources.create",u,{action:"create"})},l.records.forEach(async u=>{u.update=function(_){return c.mutate({projectId:e},"resources.update",_,{action:"update"})},u.delete=function(){return c.mutate({projectId:e},"resources.delete",u,{action:"delete"})},u.submitLike=function(){return c.mutate({projectId:e},"resources.submitLike",u,{action:"update"})}}),[l,d,o]}function useTags(e){let t=this;const n=e.projectId,s=e.type,r=e.onlyIncludeIds,{data:a,error:c,isLoading:f}=t.useSWR({projectId:n,type:s,onlyIncludeIds:r},"tags.fetch");let d=a||[];if(d.create=function(o){return t.mutate({projectId:n,type:s},"tags.create",o,{action:"create"})},d.map(async o=>{o.update=function(l){return t.mutate({projectId:n,type:s},"tags.update",l,{action:"update"})},o.delete=function(l){return t.mutate({projectId:n,type:s},"tags.delete",o,{action:"delete"})},o.submitLike=function(){return t.mutate({projectId:n,type:s},"tags.submitLike",o,{action:"update"})}}),c){let o=new Error(o),l=new window.CustomEvent("osc-error",{detail:o});document.dispatchEvent(l)}return[d,c,f]}class SessionStorage{constructor(t){this.projectId=t.projectId}getData(){const t=window.sessionStorage.getItem("openstad");let n={};try{t&&(n=JSON.parse(t))}catch{n={}}let s=n;return this.projectId&&(n[this.projectId]=n[this.projectId]||{},s=n[this.projectId]||{}),{data:n,target:s}}get(t){let{data:n,target:s}=this.getData(),r=s[t];try{r=JSON.parse(r)}catch{}return r}set(t,n){if(typeof t!="string")return;typeof n>"u"&&(n="");let{data:s,target:r}=this.getData();r[t]=n,window.sessionStorage.setItem("openstad",JSON.stringify(s))}remove(t){if(typeof t!="string")return;let{data:n,target:s}=this.getData();delete s[t],window.sessionStorage.setItem("openstad",JSON.stringify(n))}}function useCurrentUser(e){let t=this;e.projectId;const{data:n,error:s,isLoading:r}=useSWR({type:"current-user",projectId:t.projectId},a);async function a(){if(t.currentUser&&t.currentUser.id)return t.currentUser;let c=e.openStadUser||{};if(c.id&&c.projectId==t.projectId)return c;const f=new SessionStorage(e),d=new URLSearchParams(window.location.search);let o;if(d.has("jwt")){o=d.get("jwt"),f.set("openStadUser",{jwt:o});let p=window.location.href;p=p.replace(new RegExp(`[?&]jwt=${o}`),""),history.replaceState(null,"",p)}const l=e.cmsUser||{};let u=f.get("cmsUser")||{};u&&l&&u.access_token!=l.access_token&&(f.remove("cmsUser"),f.remove("openStadUser")),f.set("cmsUser",l);let _=f.get("openStadUser")||{};if(o=o||c.jwt||_.jwt,!o&&l&&l.access_token&&l.iss&&(o=await t.api.user.connectUser({projectId:t.projectId,cmsUser:l})),o){t.api.currentUserJWT=o,t.refresh();let p=await t.api.user.fetchMe({projectId:t.projectId});return f.set("openStadUser",{...p,jwt:o}),p}else return{}}return[n,()=>console.log("setUser not (yet) implemented"),s,r]}function useUserVote(e){let t=this;e.projectId,e.type;const{data:n,error:s,isLoading:r}=t.useSWR({type:"user-vote",projectId:t.projectId},"userVote.fetch");let a=n||{};if(a.submitVote=function(c){return t.mutate({type:"user-vote",projectId:t.projectId},"userVote.submitVote",c,{action:"update"})},s){let c=new Error(c),f=new window.CustomEvent("osc-error",{detail:c});document.dispatchEvent(f)}return[a,s,r]}function useSubmissions(e){let t=this;const n=e.projectId,{data:s,error:r,isLoading:a}=t.useSWR({projectId:n},"submissions.fetch");let c=s||[];if(r){let f=new Error(f),d=new window.CustomEvent("osc-error",{detail:f});document.dispatchEvent(d)}return[c,r,a]}function useCommentsByProject(e){let t=this;const n=e.projectId,s=e.sentiment,{data:r,error:a,isLoading:c}=t.useSWR({projectId:n,sentiment:s},"commentsByProject.fetch");let f=r||[];if(a){let d=new Error(d),o=new window.CustomEvent("osc-error",{detail:d});document.dispatchEvent(o)}return[f,a,c]}function useChoiceGuideResults(e){let t=this;const n=e.projectId,s=e.choiceGuideId,{data:r,error:a,isLoading:c}=t.useSWR({projectId:n,choiceGuideId:s},"choiceGuideResults.fetch");let f=r||[];if(a){let d=new Error(d),o=new window.CustomEvent("osc-error",{detail:d});document.dispatchEvent(o)}return[f,a,c]}function useChoiceGuides(e){let t=this;const n=e.projectId,s=e.choiceGuideId,{data:r,error:a,isLoading:c}=t.useSWR({projectId:n,choiceGuideId:s},"choiceGuide.fetch");let f=r||[];if(a){let d=new Error(d),o=new window.CustomEvent("osc-error",{detail:d});document.dispatchEvent(o)}return[f,a,c]}const windowGlobal=typeof window<"u"?window:{};windowGlobal.OpenStadSWR=windowGlobal.OpenStadSWR||{};function DataStore(props={}){let self=this;self.api=new singelton(props),self.projectId=props.projectId,self.useResource=useResource.bind(self),self.useComments=useComments.bind(self),self.useResources=useResources.bind(self),self.useTags=useTags.bind(self),self.useCurrentUser=useCurrentUser.bind(self),self.useUserVote=useUserVote.bind(self),self.useSubmissions=useSubmissions.bind(self),self.useCommentsByProject=useCommentsByProject.bind(self),self.useChoiceGuideResults=useChoiceGuideResults.bind(self),self.useChoiceGuides=useChoiceGuides.bind(self);const[currentUser,currentUserError,currentUserIsLoading]=self.useCurrentUser({...props,projectId:self.projectId});self.currentUser=currentUser,self.createKey=function(e,t){let n=t;return n=n.replace(/^([^.]*).*$/,"$1"),{type:n,...e}},self.useSWR=function(props,fetcherAsString){let fetcher=eval(`self.api.${fetcherAsString}`),key=self.createKey(props,fetcherAsString);return windowGlobal.OpenStadSWR[JSON.stringify(key,null,2)]=!0,useSWR(key,fetcher,{keepPreviousData:!0})};const{mutate}=useSWRConfig();self.mutate=async function(props,fetcherAsString,newData,options){let fetcher=eval(`self.api.${fetcherAsString}`),key=self.createKey(props,fetcherAsString),defaultOptions={optimisticData:e=>mergeData(e,newData,options.action),revalidate:!1,rollbackOnError:!0};return options.action!="fetch"&&options.revalidate!=!0&&(defaultOptions.populateCache=(e,t)=>mergeData(t,e,options.action)),newData!=null&&newData.parentId&&(defaultOptions.revalidate=!0),await mutate(key,fetcher(key,newData,options),{...defaultOptions,...options})},self.refresh=function(){mutate(e=>Object.keys(windowGlobal.OpenStadSWR).indexOf(JSON.stringify(e,null,2))!=-1,async e=>e,{revalidate:!0,rollbackOnError:!0})}}var _jsxFileName="/opt/openstad-headless/packages/choice-guide/src/choice-guide.tsx";function ChoiceGuide({titlePreference:e="Jouw voorkeur is:",titleNoPreference:t="Je hebt nog geen keuze gemaakt.",startHalfway:n=!0,urlStartPage:s="",urlResultPage:r="",...a}){const f=new URLSearchParams(window.location.search).get("openstadResourceId")||a.resourceId||3,[d,o]=React.useState(0);let l=(a==null?void 0:a.choiceGuide)||[{type:"a-to-b",vraag:"1. Wat vind je belangrijker?",optie1:"Dat er ruimte komt voor plantenbakken in de straat.",optie1Beschrijving:"Het kiezen voor plantenbakken gaat ten koste van extra ruimte voor fietsparkeren of zitgelegenheid.",optie2:"Dat ik mijn fiets zo dicht mogelijk bij de voordeur kan parkeren.",optie2Beschrijving:"Als er meer fietsparkeervoorzieningen in de straat geplaatst worden, is er minder ruimte voor plantenbakken of zitgelegenheid."},{type:"a-to-b",vraag:"2. Wat vind je belangrijker?",optie1:"Ruimte voor bankjes in de straat.",optie1Beschrijving:"Het kiezen voor bankjes in de straat gaat ten koste van extra ruimte voor plantenbakken.",optie2:"Ruimte voor plantenbakken in de straat.",optie2Beschrijving:"Het kiezen voor plantenbakken op de kade gaat ten koste van extra ruimte voor bankjes."},{type:"a-to-b",vraag:"3. Wat vind je belangrijker?",optie1:"Dat er veel ruimte is om mijn fiets in de straat te kunnen parkeren.",optie1Beschrijving:"Als er meer fietsparkeervoorzieningen in de straat geplaatst worden, is minder ruimte voor zitgelegenheid in de vorm van bankjes.",optie2:"Dat er genoeg bankjes zijn in de straat.",optie2Beschrijving:"Het kiezen voor (ruimte voor) bankjes op de kade gaat ten koste van extra ruimte voor plantenbakken."}];const u=new DataStore({projectId:a.projectId,api:a.api});new SessionStorage(a),u.useCurrentUser(a),u.useResource({projectId:a.projectId,resourceId:f}),u.useChoiceGuides({projectId:a.projectId,choiceGuideId:1});const[_,p]=React.useState(),[b,g]=React.useState(n?50:0),[x,h]=React.useState(!1);function A(){if(_!=null){let E=0,R=_.length*100;for(let N=0;N<_.length;N++)E=E+_[N].amount;g(Math.floor(E/R*100))}}function v(E){if(x){let R=_,N=R.findIndex(y=>y.index==E.index);R[N].amount=E.amount,p(R)}else{let R=[];for(let N=0;N<l.length;N++)R.push({index:N,amount:50});p(R),h(!0)}A()}return React.createElement(React.Fragment,null,React.createElement("div",{className:"osc",__self:this,__source:{fileName:_jsxFileName,lineNumber:129,columnNumber:7}},d===0?React.createElement("div",{__self:this,__source:{fileName:_jsxFileName,lineNumber:131,columnNumber:11}},React.createElement(React.Fragment,null,React.createElement("h5",{__self:this,__source:{fileName:_jsxFileName,lineNumber:133,columnNumber:15}},"Wat is belangrijk voor de herinrichting van jouw straat?"),React.createElement("p",{__self:this,__source:{fileName:_jsxFileName,lineNumber:134,columnNumber:15}},"Bij de herinrichting van de Schoolstraat is er niet genoeg ruimte om alles in te passen. We willen graag jouw voorkeuren weten om een beter ontwerp te kunnen maken."),React.createElement(Spacer,{size:2,__self:this,__source:{fileName:_jsxFileName,lineNumber:139,columnNumber:15}})),React.createElement("div",{__self:this,__source:{fileName:_jsxFileName,lineNumber:141,columnNumber:13}},l==null?void 0:l.map((E,R)=>React.createElement(SliderForm,{choice:E,titlePreference:e,titleNoPreference:t,onChoiceChanged:N=>{v({index:R,amount:N})},__self:this,__source:{fileName:_jsxFileName,lineNumber:143,columnNumber:17}}))),React.createElement("div",{className:"choice-guide-resource-container",__self:this,__source:{fileName:_jsxFileName,lineNumber:148,columnNumber:13}},React.createElement("h5",{__self:this,__source:{fileName:_jsxFileName,lineNumber:149,columnNumber:15}},"Hier komen de gewenste waarden."),React.createElement(ProgressBar,{progress:b,__self:this,__source:{fileName:_jsxFileName,lineNumber:150,columnNumber:15}}),React.createElement("p",{className:"progressbar-counter",__self:this,__source:{fileName:_jsxFileName,lineNumber:151,columnNumber:15}},b,"%"),React.createElement(ProgressBar,{progress:100-b,__self:this,__source:{fileName:_jsxFileName,lineNumber:154,columnNumber:15}}),React.createElement("p",{className:"progressbar-counter",__self:this,__source:{fileName:_jsxFileName,lineNumber:155,columnNumber:15}},100-b,"%")),React.createElement("div",{className:"choice-guide-resource-footer",__self:this,__source:{fileName:_jsxFileName,lineNumber:159,columnNumber:13}},React.createElement(SecondaryButton,{onClick:()=>o(d+1),__self:this,__source:{fileName:_jsxFileName,lineNumber:160,columnNumber:15}},"Volgende"))):null,d===1?React.createElement(React.Fragment,null,React.createElement("h5",{__self:this,__source:{fileName:_jsxFileName,lineNumber:170,columnNumber:13}},"Jouw resultaten"),React.createElement("p",{__self:this,__source:{fileName:_jsxFileName,lineNumber:171,columnNumber:13}},"Bedankt voor het invullen!"),React.createElement(Spacer,{size:2,__self:this,__source:{fileName:_jsxFileName,lineNumber:174,columnNumber:13}}),React.createElement("div",{className:"choice-guide-resource-container",__self:this,__source:{fileName:_jsxFileName,lineNumber:175,columnNumber:13}},React.createElement("h5",{__self:this,__source:{fileName:_jsxFileName,lineNumber:176,columnNumber:15}},"Hier zijn de resultaten."),React.createElement(ProgressBar,{progress:b,__self:this,__source:{fileName:_jsxFileName,lineNumber:177,columnNumber:15}}),React.createElement("p",{className:"progressbar-counter",__self:this,__source:{fileName:_jsxFileName,lineNumber:178,columnNumber:15}},b,"%"),React.createElement(ProgressBar,{progress:100-b,__self:this,__source:{fileName:_jsxFileName,lineNumber:181,columnNumber:15}}),React.createElement("p",{className:"progressbar-counter",__self:this,__source:{fileName:_jsxFileName,lineNumber:182,columnNumber:15}},100-b,"%")),React.createElement("section",{className:"choice-guide-resource-container",__self:this,__source:{fileName:_jsxFileName,lineNumber:186,columnNumber:13}},React.createElement("h5",{__self:this,__source:{fileName:_jsxFileName,lineNumber:187,columnNumber:15}},"Gegevens"),React.createElement("p",{__self:this,__source:{fileName:_jsxFileName,lineNumber:188,columnNumber:15}},"We willen nog een paar dingen van je weten voordat je jouw voorkeuren instuurt. Let op! Je stuurt je antwoorden pas in wanneer je onderaan deze pagina op de knop 'Voorkeuren insturen' klikt."),React.createElement("h6",{__self:this,__source:{fileName:_jsxFileName,lineNumber:193,columnNumber:15}},"Postcode"),React.createElement("p",{__self:this,__source:{fileName:_jsxFileName,lineNumber:194,columnNumber:15}},"Vul hier uw postcode in"),React.createElement(Input,{className:"choice-guide-input-zipcode",__self:this,__source:{fileName:_jsxFileName,lineNumber:195,columnNumber:15}}),React.createElement(Spacer,{size:1,__self:this,__source:{fileName:_jsxFileName,lineNumber:196,columnNumber:15}}),React.createElement("h6",{__self:this,__source:{fileName:_jsxFileName,lineNumber:197,columnNumber:15}},"Overige feedback"),React.createElement("p",{__self:this,__source:{fileName:_jsxFileName,lineNumber:198,columnNumber:15}},"Heeft u opmerkingen over de thema's of de vragenlijst? Dan kunt u die hier kwijt. (Optioneel!)"),React.createElement(Textarea,{className:"choice-guide-input-feedback",__self:this,__source:{fileName:_jsxFileName,lineNumber:202,columnNumber:15}})),React.createElement("section",{className:"choice-guide-resource-container",__self:this,__source:{fileName:_jsxFileName,lineNumber:204,columnNumber:13}},React.createElement("h5",{__self:this,__source:{fileName:_jsxFileName,lineNumber:205,columnNumber:15}},"Email-verificatie"),React.createElement("p",{__self:this,__source:{fileName:_jsxFileName,lineNumber:206,columnNumber:15}},"Via onderstaande knop vult u uw emailadres in. Ter controle krijgt u een link toegestuurd om uw e-mailadres te bevestigen. Als dat lukt komt u terug op deze pagina waar u via de knop 'Voorkeuren insturen' definitief uw stem instuurt."),React.createElement(Spacer,{size:1,__self:this,__source:{fileName:_jsxFileName,lineNumber:212,columnNumber:15}}),React.createElement(SecondaryButton,{__self:this,__source:{fileName:_jsxFileName,lineNumber:213,columnNumber:15}},"Vul uw emailadres in")),React.createElement("div",{className:"choice-guide-resource-footer",__self:this,__source:{fileName:_jsxFileName,lineNumber:215,columnNumber:13}},React.createElement(PlainButton,{onClick:()=>o(d-1),__self:this,__source:{fileName:_jsxFileName,lineNumber:216,columnNumber:15}},"Overnieuw"),React.createElement(SecondaryButton,{className:"choice-guide-send-button",onClick:()=>o(d+1),__self:this,__source:{fileName:_jsxFileName,lineNumber:219,columnNumber:15}},"Voorkeuren insturen"))):null,d===2?React.createElement(React.Fragment,null,React.createElement("section",{__self:this,__source:{fileName:_jsxFileName,lineNumber:230,columnNumber:13}},React.createElement(Spacer,{size:1,__self:this,__source:{fileName:_jsxFileName,lineNumber:231,columnNumber:15}}),React.createElement("h5",{__self:this,__source:{fileName:_jsxFileName,lineNumber:232,columnNumber:15}},"Het insturen is gelukt!"),React.createElement("p",{__self:this,__source:{fileName:_jsxFileName,lineNumber:233,columnNumber:15}},"Hartelijk bedankt voor uw bijdrage. Om op de hoogte gehouden te worden van de uitslag en uitvoering laat je via onderstaande knop je emailadres achter."),React.createElement(Spacer,{size:1,__self:this,__source:{fileName:_jsxFileName,lineNumber:238,columnNumber:15}})),React.createElement("div",{className:"choice-guide-resource-footer",__self:this,__source:{fileName:_jsxFileName,lineNumber:240,columnNumber:13}},React.createElement(PlainButton,{onClick:()=>document.location.href=s,__self:this,__source:{fileName:_jsxFileName,lineNumber:241,columnNumber:15}},"Terug naar homepage"),React.createElement(SecondaryButton,{className:"choice-guide-send-button",onClick:()=>document.location.href=r,__self:this,__source:{fileName:_jsxFileName,lineNumber:245,columnNumber:15}},"Hou mij op de hoogte"))):null))}return ChoiceGuide.loadWidget=loadWidget,exports.ChoiceGuide=ChoiceGuide,Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),exports}({},React,ReactDOM);
